#!/bin/bash

if [ -z "$1" ] || [ -z "$2" ]; then
    echo "Usage: $0 <target_url> <start_port>-<end_port>"
    exit 1
fi

echo "UDP SCAN - Starting scan for $1 ports $2"

target_url=$1
port_range=$2

IFS='-' read -r start_port end_port <<< "$port_range"

target_ip=$(dig +short "$(echo $target_url | sed 's~http[s]*://~~;s~/.*~~')")

if [ -z "$target_ip" ]; then
    echo "Unable to resolve target IP. Check the URL or ensure DNS resolution."
    exit 1
fi

for (( port = start_port; port <= end_port; port++ )); do
    nc -w 1 -u $target_ip $port && echo "Port $port is open"
done